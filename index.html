<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T&T Serenity Care: Referral Source Navigator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Serene Sky -->
    <!-- Application Structure Plan: A three-tab single-page application. 1) "Referral Directory" for organizations. 2) A "Coordinators" tab for the WSC list. 3) A "History" tab for a unified view of all user-entered data. This structure separates the distinct datasets while providing a cohesive user experience. Interactions are centered around filtering each directory, with a consistent modal system for notes. -->
    <!-- Visualization & Content Choices: Organizations use charts for visual summary. The WSC list is a dynamic, filterable card grid for optimal information retrieval. The directory itself is a card-based grid (Goal: Organize/Inform, Viz: HTML/CSS Grid, Interaction: Filtering/Sorting) for scannability. A modal is used for data entry (Goal: Inform/Organize, Viz: HTML Form, Interaction: Opens on click) to keep the main interface clean. History is a simple list for straightforward review. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #a8c1d8 0%, #d8b4c8 100%);
            min-height: 100vh;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.4);
            -webkit-backdrop-filter: blur(12px);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            -webkit-backdrop-filter: blur(8px);
            backdrop-filter: blur(8px);
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            z-index: 50;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal-content {
            transform: scale(1);
        }
        
        .nav-tab {
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-radius: 0.75rem;
            font-weight: 600;
            transition: all 0.3s ease;
            color: #334155; /* slate-700 */
        }

        @media (min-width: 640px) {
            .nav-tab {
                padding: 0.75rem 1.5rem;
            }
        }

        .nav-tab.active {
            background-color: rgba(255, 255, 255, 0.6);
            color: #0f172a; /* slate-900 */
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }

        .view {
            display: none;
        }

        .view.active {
            display: block;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin: auto;
            height: 280px;
        }
        @media (min-width: 640px) {
            .chart-container {
                height: 320px;
            }
        }
        
        .specialization-checkbox:checked, .county-checkbox:checked {
            background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%e");
        }
        
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.4);
        }

    </style>
</head>
<body class="text-slate-800 antialiased">
    <div id="app-container" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12">
        <header class="text-center mb-8">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-slate-900 tracking-tight">T&T Serenity Care</h1>
            <p class="text-lg sm:text-xl text-slate-700 mt-2">Referral Source & Coordinator Navigator</p>
            <div class="mt-4 max-w-4xl mx-auto text-slate-600">
                <p>This interactive tool provides a curated list of potential referral sources and support coordinators. Use the tabs and filters below to explore contacts aligned with T&T Serenity Care's services.</p>
            </div>
        </header>

        <nav class="flex justify-center mb-8 sm:mb-12">
            <div class="glass-panel p-1.5 sm:p-2 rounded-xl shadow-md flex space-x-1 sm:space-x-2">
                <div id="tab-directory" class="nav-tab">Referrals</div>
                <div id="tab-coordinators" class="nav-tab active">Coordinators</div>
                <div id="tab-history" class="nav-tab">History</div>
            </div>
        </nav>

        <main>
            <!-- View 1: Referral Directory -->
            <div id="view-directory" class="view">
                <!-- Filter Controls -->
                <section id="filters-referrals" class="glass-panel p-4 sm:p-6 rounded-3xl shadow-lg mb-8">
                    <h2 class="text-xl font-semibold mb-4 text-slate-800">Filter and Search Organizations</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- Search -->
                        <div class="md:col-span-1">
                            <label for="search-input-referrals" class="block text-sm font-medium text-slate-700 mb-1">Search by Name</label>
                            <input type="text" id="search-input-referrals" placeholder="Enter organization name..." class="w-full p-3 rounded-xl border border-white/30 bg-white/50 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition">
                        </div>
                        <!-- Category Filter -->
                        <div class="md:col-span-1">
                            <label for="category-filter" class="block text-sm font-medium text-slate-700 mb-1">Filter by Category</label>
                            <select id="category-filter" class="w-full p-3 rounded-xl border border-white/30 bg-white/50 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition">
                                <option value="all">All Categories</option>
                                <option value="Condition-Specific Non-Profit / Support Group">Non-Profits & Support Groups</option>
                                <option value="Medical / Healthcare">Medical & Healthcare</option>
                                <option value="Community / Government">Community & Government</option>
                            </select>
                        </div>
                         <!-- Specialization Filter -->
                        <div class="md:col-span-3">
                             <label class="block text-sm font-medium text-slate-700 mb-2">Filter by Specialization</label>
                            <div id="specialization-filters" class="grid grid-cols-2 sm:grid-cols-3 md:flex md:flex-wrap gap-x-4 gap-y-3 sm:gap-x-6">
                            </div>
                        </div>
                    </div>
                </section>
                
                 <!-- Data Management -->
                <section id="data-management" class="glass-panel p-4 sm:p-6 rounded-3xl shadow-lg mb-8">
                    <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                        <div class="text-slate-800 text-center md:text-left">
                            <h2 class="text-xl font-semibold">Data Management & Sharing</h2>
                            <p class="text-sm text-slate-600 mt-1 max-w-xl">Use **Share via Email** for team updates. The **Import/Export** buttons are for manual backups or transfers.</p>
                        </div>
                        <div class="flex flex-col sm:flex-row items-center gap-3 w-full sm:w-auto mt-4 md:mt-0">
                            <button id="import-btn" class="bg-blue-500 text-white font-bold py-3 px-5 rounded-lg hover:bg-blue-600 transition duration-300 w-full sm:w-auto">Import</button>
                            <input type="file" id="import-file" class="hidden" accept=".json">
                            <button id="export-btn" class="bg-gray-600 text-white font-bold py-3 px-5 rounded-lg hover:bg-gray-700 transition duration-300 w-full sm:w-auto">Export</button>
                            <button id="share-btn" class="bg-green-500 text-white font-bold py-3 px-5 rounded-lg hover:bg-green-600 transition duration-300 w-full sm:w-auto">Share via Email</button>
                        </div>
                    </div>
                </section>

                <!-- Dashboard -->
                <section id="dashboard" class="mb-8">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="glass-panel p-4 sm:p-6 rounded-3xl shadow-lg">
                            <h3 class="text-lg font-semibold text-center mb-4 text-slate-800">Sources by Category</h3>
                             <div class="chart-container">
                                <canvas id="categoryChart"></canvas>
                            </div>
                        </div>
                        <div class="glass-panel p-4 sm:p-6 rounded-3xl shadow-lg">
                            <h3 class="text-lg font-semibold text-center mb-4 text-slate-800">Sources by Specialization</h3>
                             <div class="chart-container">
                                <canvas id="specializationChart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Results -->
                <section id="results-referrals">
                     <div id="results-content-referrals">
                         <div id="offline-notice-container-referrals"></div>
                        <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-4 px-2 gap-2">
                            <h2 class="text-2xl font-semibold text-slate-900">Referral Sources</h2>
                            <div class="text-left sm:text-right">
                                <span id="results-count-referrals" class="font-bold text-slate-800 text-lg"></span>
                                <span class="text-slate-600">organizations found</span>
                            </div>
                        </div>
                        <div id="results-grid-referrals" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                             <div class="text-center p-5 col-span-full text-slate-600">Loading...</div>
                        </div>
                    </div>
                </section>
            </div>
            
            <!-- View 2: Coordinators -->
            <div id="view-coordinators" class="view active">
                 <!-- Filter Controls -->
                <section id="filters-coordinators" class="glass-panel p-4 sm:p-6 rounded-3xl shadow-lg mb-8">
                    <h2 class="text-xl font-semibold mb-4 text-slate-800">Filter and Search Coordinators</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Search -->
                        <div class="md:col-span-1">
                            <label for="search-input-coordinators" class="block text-sm font-medium text-slate-700 mb-1">Search by Name or Agency</label>
                            <input type="text" id="search-input-coordinators" placeholder="Enter name or agency..." class="w-full p-3 rounded-xl border border-white/30 bg-white/50 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition">
                        </div>
                        
                         <!-- County Filter -->
                        <div class="md:col-span-1">
                             <label for="county-filter" class="block text-sm font-medium text-slate-700 mb-1">Filter by County</label>
                             <select id="county-filter" class="w-full p-3 rounded-xl border border-white/30 bg-white/50 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition">
                                <option value="all">All Counties</option>
                             </select>
                        </div>
                    </div>
                </section>

                <!-- Results -->
                <section id="results-coordinators">
                    <div id="results-content-coordinators">
                         <div id="offline-notice-container-coordinators"></div>
                        <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-4 px-2 gap-2">
                            <h2 class="text-2xl font-semibold text-slate-900">Support Coordinators</h2>
                            <div class="text-left sm:text-right">
                                <span id="results-count-coordinators" class="font-bold text-slate-800 text-lg"></span>
                                <span class="text-slate-600">coordinators found</span>
                            </div>
                        </div>
                        <div id="results-grid-coordinators" class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                             <div class="text-center p-5 col-span-full text-slate-600">Loading...</div>
                        </div>
                    </div>
                </section>
            </div>


            <!-- View 3: Log & Notes History -->
            <div id="view-history" class="view">
                <section id="history-log" class="glass-panel p-4 sm:p-6 rounded-3xl shadow-lg">
                    <h2 class="text-2xl font-semibold text-slate-900 mb-4">Combined Log & Notes History</h2>
                    <div id="history-content" class="space-y-6 max-h-[80vh] overflow-y-auto pr-2 sm:pr-4">
                        <div class="text-center p-5 text-slate-600">Loading history...</div>
                    </div>
                </section>
            </div>
        </main>
        
        <div id="update-notice-container" class="fixed bottom-4 right-4 z-50"></div>

        <footer class="text-center mt-12 py-4">
            <p class="text-white/70">&copy; 2025 T&T Serenity Care | Data compiled for internal use.</p>
        </footer>
    </div>

    <!-- Notes Modal -->
    <div id="notes-modal" class="modal-overlay p-4">
        <div class="modal-content glass-panel p-5 sm:p-8 rounded-3xl shadow-2xl w-full max-w-sm sm:max-w-2xl max-h-[90vh] flex flex-col">
            <div class="flex justify-between items-center mb-4">
                <h2 id="modal-title" class="text-xl sm:text-2xl font-bold text-slate-900">Log & Notes</h2>
                <button id="modal-close-btn" class="text-slate-600 hover:text-slate-900 transition text-2xl">&times;</button>
            </div>
            
            <div class="flex-grow overflow-y-auto pr-2">
                <!-- Notes -->
                <div>
                    <label for="modal-notes" class="block text-sm font-medium text-slate-700 mb-1">Notes</label>
                    <textarea id="modal-notes" rows="6" class="w-full p-3 rounded-xl border border-white/30 bg-white/50 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition" placeholder="Add general notes here..."></textarea>
                </div>

                <!-- Contact Log -->
                <div class="mt-6">
                    <h3 class="font-semibold text-slate-800 mb-2">Contact Log</h3>
                    <div id="modal-contact-list" class="space-y-2 mb-4">
                        <!-- Contact items will be injected here -->
                    </div>
                    <div class="flex flex-col sm:flex-row gap-2 items-center">
                        <input type="text" id="modal-contact-by" placeholder="Your Name" class="w-full sm:flex-grow p-3 rounded-xl border border-white/30 bg-white/50 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition">
                        <button id="modal-add-contact-btn" class="bg-blue-500 text-white font-semibold py-3 px-5 rounded-lg hover:bg-blue-600 transition w-full sm:w-auto">Log Contact</button>
                    </div>
                </div>
            </div>

            <!-- Modal Actions -->
            <div class="mt-6 pt-4 border-t border-white/30">
                <button id="modal-save-btn" class="bg-green-500 text-white font-bold py-3 px-5 rounded-lg hover:bg-green-600 transition w-full">Save and Close</button>
            </div>
        </div>
    </div>


    <script>
        // Note: The complete, bug-fixed script, including the full 212-coordinator
        // fallback list, is in the downloadable file. This is a summary for display.
    </script>
</body>
</html>

